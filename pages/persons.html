<?xml version="1.0" encoding="UTF-8"?>
<div data-template="templates:surround" data-template-with="templates/datatable.html" data-template-at="datatable">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h1>Personenregister</h1>
                        <a>
                            <i class="fas fa-info" title="Info zum Personenregister" data-toggle="modal" data-target="#exampleModal"/>
                                
                        </a>
                        <a href="../resolver/resolve-doc.xql?doc-name=listperson.xml&amp;collection=indices">
                        <i class="fas fa-download" title="show TEI source"/>
                        </a>
                    </div>
                    <div class="card-body">
                        <table id="myTable" style="width:100%;" class="table table-striped table-condensed table-hover">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Vorname</th>
                                    <th>geboren am</th>
                                    <th>geboren in</th>
                                    <th>gestorben am</th>
                                    <th>gestorben in</th>
                                    <th>Normdaten</th>
                                    <th>Beruf</th>
                                    <th>Gender</th>
                                </tr>
                                <tr id="filterrow">
                                    <th>Name</th>
                                    <th>Vorname</th>
                                    <th>geboren am</th>
                                    <th>geboren in</th>
                                    <th>gestorben am</th>
                                    <th>gestorben in</th>
                                    <th>Normdaten</th>
                                    <th>Beruf</th>
                                    <th>Gender</th>
                                </tr>
                            </thead>
                            <tbody id="myTableBody" style="display:none">
                                <tr data-template="app:listPers"/>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal" tabindex="-1" role="dialog" id="exampleModal">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Info zum Personenregister</h5>
                            </div>
                            <div class="modal-body">
                                <p>Das vorliegende Personenverzeichnis umfasst Personen die in den Tagebucheinträgen erwähnt werden. Die Namensansetzung wurden von den EditorInnen zum Zwecke besserer Suchmöglichkeiten normalisiert.</p>
                                <p>
                                Der Name der jeweiligen Person ist mit jenen Dokumenten verlinkt, in denen diese Person erwähnt wird.
                                </p>
                                <p>
                                Die Sortierung der einzelnen Spalten kann durch einen Klick auf die Spaltenüberschrift geändert werden. Das Suchfeld rechts oberhalb der Tabelle durchsucht den gesamten Tabelleninhalt. Darüberhinaus können mit Hilfe der Suchfelder am Fußende der Spalten gezielt die Inhalte dieser Spalten durchsucht bzw. gefiltert werden.
                                </p>
                                <p>Die (ggf. gefilterte) Tabelle kann als PDF oder Excel heruntegalden bzw. in den Zwischenspeicher kopiert werden.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Schließen</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    
        var table = $('#myTable').DataTable({
        "language": {
        "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/German.json"
        },
        keepConditions: true,
        "pageLength": 25,
         orderCellsTop: true,
        dom:"'&lt;'row'&lt;'col-sm-4'f&gt;&lt;'col-sm-4'i&gt;&lt;'col-sm-4 exportbuttons'Br&gt;&gt;'"+
            "'&lt;'row'&lt;'col-sm-12't&gt;&gt;'"+
            "'&lt;'row'&lt;'col-sm-6 offset-sm-6'p&gt;&gt;'"
        ,
         buttons: [
            {
                extend:'colvis',
                className: 'btn-outline-green',
                init: function(api, node, config) {
                    $(node).removeClass('btn-secondary')
                }
            },
            {
                extend:    'copyHtml5',
                text:      '<i class="far fa-copy"/>',
                titleAttr: 'Copy',
                className: 'btn-link',
                init: function(api, node, config) {
                    $(node).removeClass('btn-secondary')
                }
            },
            {
                extend:    'excelHtml5',
                text:      '<i class="far fa-file-excel"/>',
                titleAttr: 'Excel',
                className: 'btn-link',
                init: function(api, node, config) {
                    $(node).removeClass('btn-secondary')
                }
            },
            {
                extend:    'pdfHtml5',
                text:      '<i class="far fa-file-pdf"/>',
                titleAttr: 'PDF',
                className: 'btn-link',
                init: function(api, node, config) {
                    $(node).removeClass('btn-secondary')
                }
            }
        ],
        responsive: true,
        });
        
        $(document).ready(function() {
        $("#myTableBody").show({});
        $('#myTable thead #filterrow th').each( function () {
        var title = $(this).text();
        $(this).html( '<input type="text"/>' );
        });
       
        table.columns().every( function () {
        var that = this;
        
        $( "thead input" ).on( 'keyup change', function () {
        if ( that.search() !== this.value ) {
        that
        .search( this.value )
        .draw();
        }
        } );
        } );
      //  table.columns.adjust().draw();
        });
        

    </script>
</div>